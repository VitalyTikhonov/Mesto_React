(this["webpackJsonpmesto-frontend-react"]=this["webpackJsonpmesto-frontend-react"]||[]).push([[0],{33:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=n(22),o=n.n(s),i=n(10),u=(n(33),n(26)),p=n(3),l=n.n(p),d=n(9),m=n(5),j=n(23),h=n(24),b=("http://localhost:".concat(3e3),"".concat("https://api.vitaliytikhonov.ru").concat("/webdev/projects/mesto")),f=new(function(){function e(){Object(j.a)(this,e),this.baseUrl=b,this.content_type="application/json"}return Object(h.a)(e,[{key:"primaryResponseHandler",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",credentials:"include"}).then((function(t){return e.primaryResponseHandler(t)}))}},{key:"signup",value:function(e){var t=this,n=e.userName,a=e.userDescription,r=e.avatar,c=e.password,s=e.email;return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":this.content_type},credentials:"include",body:JSON.stringify({userName:n,userDescription:a,avatar:r,password:c,email:s})}).then((function(e){return t.primaryResponseHandler(e)}))}},{key:"login",value:function(e){var t=this,n=e.email,a=e.password;return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:{"Content-Type":this.content_type},credentials:"include",body:JSON.stringify({email:n,password:a})}).then((function(e){return t.primaryResponseHandler(e)}))}},{key:"logout",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/signout"),{method:"POST",headers:{"Content-Type":this.content_type},credentials:"include"}).then((function(t){return e.primaryResponseHandler(t)}))}},{key:"saveProfile",value:function(e){var t=this,n=e.userName,a=e.userDescription;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{"Content-Type":this.content_type},credentials:"include",body:JSON.stringify({userName:n,userDescription:a})}).then((function(e){return t.primaryResponseHandler(e)}))}},{key:"changePhoto",value:function(e){var t=this,n=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{"Content-Type":this.content_type},credentials:"include",body:JSON.stringify({avatar:n})}).then((function(e){return t.primaryResponseHandler(e)}))}},{key:"getCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",credentials:"include"}).then((function(t){return e.primaryResponseHandler(t)}))}},{key:"addCard",value:function(e){var t=this,n=e.placeName,a=e.placeImagelink;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{"Content-Type":this.content_type},credentials:"include",body:JSON.stringify({name:n,link:a})}).then((function(e){return t.primaryResponseHandler(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",credentials:"include"}).then((function(e){return t.primaryResponseHandler(e)}))}},{key:"toggleCardLike",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:t?"PUT":"DELETE",credentials:"include"}).then((function(e){return n.primaryResponseHandler(e)}))}}]),e}()),O=Object(r.createContext)(),v=Object(r.createContext)();var g=function(){var e=Object(r.useContext)(v);return Object(a.jsxs)("nav",{className:"nav-bar",children:[Object(a.jsx)(i.b,{exact:!0,to:"/",className:"nav-bar__link link",activeClassName:"nav-bar__link_active",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),"loggedIn"===e&&Object(a.jsx)(i.b,{to:"/user-profile",className:"nav-bar__link link",activeClassName:"nav-bar__link_active",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})]})},x=n.p+"static/media/logo.fad4f8a5.svg";var _=function(e){var t=e.popupMap,n=e.handlePopupControlAction,r=e.authStatus.loginStatus,c=e.logout,s=t.form.login;return Object(a.jsxs)("header",{className:"header root__section",children:[Object(a.jsx)("img",{src:x,alt:"mesto logo",className:"logo"}),Object(a.jsxs)("div",{className:"header__menu",children:[Object(a.jsx)(g,{}),Object(a.jsx)("button",{type:"button",className:"button header__auth-button",onClick:function(){if("loggedIn"===r)c();else{var e={target:{id:s.name+"OpenElem"}};n(e)}},children:"loggedIn"===r?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"})]})]})},C=n(2),N=n(14),k=n(27);n(40);var y=function(){return Object(a.jsx)("i",{className:"circle-preloader"})};var w=function(e){var t=e.component,n=Object(k.a)(e,["component"]),c=Object(r.useContext)(v);return"unknown"===c?Object(a.jsx)(y,{}):"loggedIn"===c?Object(a.jsx)(t,Object(N.a)({},n)):Object(a.jsx)(C.a,{to:"/"})},S=n.p+"static/media/vitaliytikhonov.152f7d20.jpg";var P=function(){return Object(a.jsxs)("section",{className:"project-info root__section",children:[Object(a.jsx)("img",{src:S,alt:"\u0424\u043e\u0442\u043e \u0430\u0432\u0442\u043e\u0440\u0430",className:"project-info__avatar"}),Object(a.jsxs)("div",{className:"project-info__description",children:[Object(a.jsx)("h3",{className:"project-info__headline section-headline",children:"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"}),Object(a.jsx)("p",{className:"project-info__text",children:"\u042f \u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u0422\u0438\u0445\u043e\u043d\u043e\u0432. \u0412\xa02020\xa0\u0433. \u043f\u0440\u043e\u0448\u0435\u043b \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u0438 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0432 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435."}),Object(a.jsx)("p",{className:"project-info__text",children:"\u042d\u0442\u043e\u0442 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \xab\u041c\u0435\u0441\u0442\u0430\xbb \u2013 \u043c\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u0443\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043d\u0430 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0435 React.js."}),Object(a.jsx)("p",{className:"project-info__text",children:"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043c\u0435\u0441\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u0430\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b, \u0438 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u043c\u0438."})]})]})};var D=function(e){var t=e.handlePopupControlAction,n=e.form,c=n.editProfile,s=n.changePhoto,o=n.newPlace,i=Object(r.useContext)(O),u=i.userDescription,p=i.avatar,l=i.userName;return Object(a.jsx)("section",{className:"profile root__section",children:Object(a.jsxs)("div",{className:"user-info",children:[Object(a.jsx)("div",{className:"user-info__photo",id:s.name+"OpenElem",onClick:t,style:{backgroundImage:"url(".concat(p,")")}}),Object(a.jsxs)("div",{className:"user-info__data",children:[Object(a.jsx)("h1",{className:"user-info__name",children:l}),Object(a.jsx)("p",{className:"user-info__about",children:u}),Object(a.jsx)("button",{className:"button user-info__button-edit-profile",id:c.name+"OpenElem",onClick:t,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(a.jsx)("button",{className:"button user-info__button",id:o.name+"OpenElem",onClick:t,children:"+"})]})})};var E=function(e){var t=e.cardData,n=e.cardData,c=n._id,s=n.name,o=n.link,i=n.owner,u=n.likes,p=e.handlePopupControlAction,l=e.popupName,d=e.onCardLike,m=e.onCardDelete,j=Object(r.useContext)(O),h=Object(r.useContext)(v),b=i===j._id,f=u.some((function(e){return e===j._id}));return Object(a.jsxs)("div",{className:"place-card",children:[Object(a.jsx)("div",{className:"place-card__image",style:{backgroundImage:"url(".concat(o,")")},onClick:function(){p({target:{id:l+"OpenElem",imageUrl:o}})},children:Object(a.jsx)("button",{className:"place-card__delete-icon",onClick:function(e){e.stopPropagation(),window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443?")&&m(c)},disabled:!b})}),Object(a.jsxs)("div",{className:"place-card__description",children:[Object(a.jsx)("h3",{className:"place-card__name",children:s}),Object(a.jsxs)("div",{className:"like",children:[Object(a.jsx)("button",{className:"like__icon ".concat(f?"like__icon_liked":""),onClick:function(){d(t,!f)},disabled:"loggedIn"!==h}),Object(a.jsx)("span",{className:"like__count",children:u.length})]})]})]})};var I=function(e){var t=e.imageZoom,n=e.cards,c=e.handlePopupControlAction,s=e.handleCardLike,o=e.handleCardDelete,i=e.onesOwnCardsOnly,u=Object(r.useContext)(O),p=Object(r.useState)([]),l=Object(m.a)(p,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){if(i){var e=n.filter((function(e){return e.owner===u._id}));j(e)}else j(n)}),[i,n,u._id]),Object(a.jsx)("section",{className:"places-list root__section",children:d&&d.map((function(e,n){return Object(a.jsx)(E,{cardData:e,handlePopupControlAction:c,popupName:t.name,onCardLike:s,onCardDelete:o},"".concat(n,"_").concat(e.id))}))})};var L=function(e){var t=e.popupMap,n=t.form,r=t.imageZoom,c=e.handlePopupControlAction,s=e.cards,o=e.handleCardLike,i=e.handleCardDelete;return Object(a.jsx)("main",{className:"main",children:Object(a.jsxs)(C.d,{children:[Object(a.jsxs)(C.b,{exact:!0,path:"/",children:[Object(a.jsx)(P,{}),Object(a.jsx)(I,{imageZoom:r,cards:s,handlePopupControlAction:c,handleCardLike:o,handleCardDelete:i})]}),Object(a.jsxs)(C.b,{path:"/user-profile",children:[Object(a.jsx)(w,{component:D,form:n,handlePopupControlAction:c}),Object(a.jsx)(I,{imageZoom:r,cards:s,handlePopupControlAction:c,handleCardLike:o,handleCardDelete:i,onesOwnCardsOnly:"true"})]})]})})},A=n(16);var T=function(e){var t=e.InputSet,n=e.inputState,r=e.inputState,c=r.values,s=r.updater,o=e.contentsConfig,i=o.name,u=o.title,p=e.updateData,l=e.toggleAuthDialog;return Object(a.jsxs)("div",{className:"popup__content popup__content_type_form",children:[Object(a.jsx)("h3",{className:"popup__title",children:u}),Object(a.jsxs)("form",{className:"popup__form",name:i,onSubmit:function(e){e.preventDefault(),p(c)},noValidate:!0,children:[Object(a.jsx)(t,{handleInputChange:function(e){var t=e.target,n=t.name,a=t.value;s(Object(N.a)(Object(N.a)({},c),{},Object(A.a)({},n,a)))},inputState:n}),Object(a.jsx)("button",{type:"submit",className:"button popup__button",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})," ","login"===i&&Object(a.jsxs)("p",{className:"popup__prompt",children:["\u0438\u043b\u0438 ",Object(a.jsx)("span",{className:"popup__prompt-link",onClick:l,children:"\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),"signup"===i&&Object(a.jsxs)("p",{className:"popup__prompt",children:["\u0438\u043b\u0438 ",Object(a.jsx)("span",{className:"popup__prompt-link",onClick:l,children:"\u0432\u043e\u0439\u0442\u0438"})]})]})]})};function U(e){var t=e.card;return Object(a.jsx)("div",{className:"popup__content popup__content_type_image-view-card",children:Object(a.jsx)("img",{src:t,alt:"",className:"popup__image",tabIndex:0})})}var H=n.p+"static/media/close.8a65f75d.svg";var q=function(e){var t=e.contentsConfig,n=e.contentsConfig.name,c=e.handlePopupControlAction,s=e.updateData,o=e.InputSet,i=e.inputState,u=e.card,p=e.toggleAuthDialog;return Object(r.useEffect)((function(){var e=document.getElementById("".concat(n,"Popup"));function t(t){("Escape"===t.key||"click"===t.type&&t.target===e)&&c({target:{id:n+"OpenElem"}})}return document.addEventListener("keydown",t),document.addEventListener("click",t),function(){document.removeEventListener("keydown",t),document.removeEventListener("click",t)}})),Object(a.jsx)("div",{className:"popup popup_is-open",id:n+"Popup",tabIndex:0,children:Object(a.jsxs)("div",{className:"popup__slot",children:[Object(a.jsx)("img",{src:H,alt:"Close",className:"popup__close",id:n+"OpenElem",onClick:c}),o&&Object(a.jsx)(T,{InputSet:o,contentsConfig:t,updateData:s,inputState:i,toggleAuthDialog:p}),u&&Object(a.jsx)(U,{card:u})]})})};var R=function(e){var t=e.handleInputChange,n=e.inputState,c=n.values,s=n.updater,o=Object(r.useContext)(O),i=o.userDescription,u=o.userName;return Object(r.useEffect)((function(){s({userName:u,userDescription:i})}),[s,u,i]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",name:"userName",value:c.userName,id:"user-name",className:"popup__input",onChange:t,placeholder:"\u0418\u043c\u044f",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"user-name-error"}),Object(a.jsx)("input",{type:"text",name:"userDescription",value:c.userDescription,id:"user-description",className:"popup__input",onChange:t,placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"user-description-error"})]})};var Z=function(e){var t=e.handleInputChange,n=e.inputState,c=n.values,s=n.updater,o=Object(r.useContext)(O).avatar;return Object(r.useEffect)((function(){s({avatar:o})}),[s,o]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"url",name:"avatar",value:c.avatar,id:"avatar",className:"popup__input",onChange:t,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"avatar-error"})]})};var J=function(e){var t=e.handleInputChange,n=e.inputState.values;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",name:"placeName",value:n.placeName,id:"place-name",className:"popup__input",onChange:t,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"place-name-error"}),Object(a.jsx)("input",{type:"url",name:"placeImagelink",value:n.placeImagelink,id:"place-link",className:"popup__input",onChange:t,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"place-link-error"})]})};var F=function(e){var t=e.handleInputChange,n=e.inputState.values;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",name:"userName",value:n.userName,id:"user-name",className:"popup__input",onChange:t,placeholder:"\u0418\u043c\u044f",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"user-name-error"}),Object(a.jsx)("input",{type:"text",name:"userDescription",value:n.userDescription,id:"user-description",className:"popup__input",onChange:t,placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"user-description-error"}),Object(a.jsx)("input",{type:"url",name:"avatar",value:n.avatar,id:"avatar",className:"popup__input",onChange:t,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"avatar-error"}),Object(a.jsx)("input",{type:"email",name:"email",value:n.email,id:"email",className:"popup__input",onChange:t,placeholder:"\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"email-error"}),Object(a.jsx)("input",{type:"password",name:"password",value:n.password,id:"password",className:"popup__input",onChange:t,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"password-error"})]})};var M=function(e){var t=e.handleInputChange,n=e.inputState.values;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"email",name:"email",value:n.email,id:"email",className:"popup__input",onChange:t,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"email-error"}),Object(a.jsx)("input",{type:"password",name:"password",value:n.password,id:"password",className:"popup__input",onChange:t,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:2,maxLength:30}),Object(a.jsx)("span",{className:"popup__error",id:"password-error"})]})},B={form:{signup:{name:"signup",title:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},login:{name:"login",title:"\u0412\u043e\u0439\u0442\u0438"},editProfile:{name:"editProfile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"},changePhoto:{name:"changePhoto",title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"},newPlace:{name:"newPlace",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e"}},imageZoom:{name:"imageZoom"}};var G=function(){var e=Object(r.useState)("unknown"),t=Object(m.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(m.a)(s,2),i=o[0],p=o[1],j=Object(r.useState)(!1),h=Object(m.a)(j,2),b=h[0],g=h[1],x=Object(r.useState)(!1),C=Object(m.a)(x,2),N=C[0],k=C[1],y=Object(r.useState)(!1),w=Object(m.a)(y,2),S=w[0],P=w[1],D=Object(r.useState)(!1),E=Object(m.a)(D,2),I=E[0],A=E[1],T=Object(r.useState)(B),U=Object(m.a)(T,1)[0],H=Object(r.useState)(null),G=Object(m.a)(H,2),V=G[0],z=G[1],K=Object(r.useState)({userName:"",userDescription:"",avatar:"",email:"",_id:""}),Q=Object(m.a)(K,2),W=Q[0],X=Q[1],Y=Object(r.useState)([]),$=Object(m.a)(Y,2),ee=$[0],te=$[1],ne=Object(r.useState)({userName:"",userDescription:"",avatar:"",password:"",email:""}),ae=Object(m.a)(ne,2),re=ae[0],ce=ae[1],se=Object(r.useState)({email:"",password:""}),oe=Object(m.a)(se,2),ie=oe[0],ue=oe[1],pe=Object(r.useState)({userName:"",userDescription:""}),le=Object(m.a)(pe,2),de=le[0],me=le[1],je=Object(r.useState)({avatar:""}),he=Object(m.a)(je,2),be=he[0],fe=he[1],Oe=Object(r.useState)({placeName:"",placeImagelink:""}),ve=Object(m.a)(Oe,2),ge=ve[0],xe=ve[1];function _e(){return(_e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.signup(t);case 3:n=e.sent,p(!1),c("loggedIn"),X(n),ce({userName:"",userDescription:"",avatar:"",email:""}),e.next=17;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,e.t0.json();case 14:a=e.sent,console.log(a),c("loggedOut");case 17:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ce(){return(Ce=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.login(t);case 3:n=e.sent,g(!1),c("loggedIn"),X(n),ue({email:"",password:""}),e.next=17;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,e.t0.json();case 14:a=e.sent,console.log(a),c("loggedOut");case 17:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ne(){return(Ne=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.logout();case 3:c("loggedOut"),X({userName:"",userDescription:"",avatar:"",email:"",_id:""}),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,e.t0.json();case 11:t=e.sent,console.log(t);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ke(){return(ke=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.saveProfile(t);case 3:n=e.sent,X(n),k(!1),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,e.t0.json();case 12:a=e.sent,console.log(a);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ye(){return(ye=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.changePhoto(t);case 3:n=e.sent,X(n),P(!1),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,e.t0.json();case 12:a=e.sent,console.log(a);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function we(){return(we=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.addCard(t);case 3:n=e.sent,te([].concat(Object(u.a)(ee),[n])),A(!1),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,e.t0.json();case 12:a=e.sent,console.log(a);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Se(){return(Se=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.toggleCardLike(t._id,n);case 3:a=e.sent,r=ee.map((function(e){return e._id===t._id?a:e})),te(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Pe(){return(Pe=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.deleteCard(t);case 3:n=e.sent,a=ee.filter((function(e){return e._id!==n._id})),te(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function De(){p(!i),g(!b)}function Ee(e){switch(e.target.id){case"".concat(U.form.signup.name,"OpenElem"):p(!i);break;case"".concat(U.form.login.name,"OpenElem"):g(!b);break;case"".concat(U.form.editProfile.name,"OpenElem"):k(!N);break;case"".concat(U.form.changePhoto.name,"OpenElem"):P(!S);break;case"".concat(U.form.newPlace.name,"OpenElem"):A(!I);break;case"".concat(U.imageZoom.name,"OpenElem"):var t=e.target.imageUrl;z(t||null)}document.activeElement.blur()}return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.getUserInfo();case 3:t=e.sent,X(t),c("loggedIn"),e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,e.t0.json();case 12:n=e.sent,console.log(n),c("loggedOut");case 15:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.getCards();case 3:t=e.sent,te(t),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,e.t0.json();case 11:n=e.sent,console.log(n);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsx)(v.Provider,{value:n,children:Object(a.jsx)(O.Provider,{value:W,children:Object(a.jsxs)("div",{className:"root",children:[Object(a.jsx)(_,{popupMap:U,handlePopupControlAction:Ee,authStatus:{loginStatus:n},logout:function(){return Ne.apply(this,arguments)}}),Object(a.jsx)(L,{popupMap:U,handlePopupControlAction:Ee,cards:ee,handleCardLike:function(e,t){return Se.apply(this,arguments)},handleCardDelete:function(e){return Pe.apply(this,arguments)}}),i&&Object(a.jsx)(q,{contentsConfig:U.form.signup,InputSet:F,inputState:{values:re,updater:ce},handlePopupControlAction:Ee,updateData:function(e){return _e.apply(this,arguments)},toggleAuthDialog:De}),b&&Object(a.jsx)(q,{contentsConfig:U.form.login,InputSet:M,inputState:{values:ie,updater:ue},handlePopupControlAction:Ee,updateData:function(e){return Ce.apply(this,arguments)},toggleAuthDialog:De}),N&&Object(a.jsx)(q,{contentsConfig:U.form.editProfile,InputSet:R,inputState:{values:de,updater:me},handlePopupControlAction:Ee,updateData:function(e){return ke.apply(this,arguments)}}),S&&Object(a.jsx)(q,{contentsConfig:U.form.changePhoto,InputSet:Z,inputState:{values:be,updater:fe},handlePopupControlAction:Ee,updateData:function(e){return ye.apply(this,arguments)}}),I&&Object(a.jsx)(q,{contentsConfig:U.form.newPlace,InputSet:J,inputState:{values:ge,updater:xe},handlePopupControlAction:Ee,updateData:function(e){return we.apply(this,arguments)}}),V&&Object(a.jsx)(q,{contentsConfig:U.imageZoom,card:V,handlePopupControlAction:Ee})]})})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(G,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.43214825.chunk.js.map